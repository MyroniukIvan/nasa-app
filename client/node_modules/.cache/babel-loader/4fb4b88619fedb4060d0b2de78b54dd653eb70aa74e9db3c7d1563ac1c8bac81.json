{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivanmironuk/WebstormProjects/nasa-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ivanmironuk/WebstormProjects/nasa-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ivanmironuk/WebstormProjects/nasa-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useState}from\"react\";import{httpGetLaunches,httpSubmitLaunch,httpAbortLaunch}from'./requests';function useLaunches(onSuccessSound,onAbortSound,onFailureSound){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),launches=_useState2[0],saveLaunches=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPendingLaunch=_useState4[0],setPendingLaunch=_useState4[1];var getLaunches=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var fetchedLaunches;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return httpGetLaunches();case 2:fetchedLaunches=_context.sent;saveLaunches(fetchedLaunches);case 4:case\"end\":return _context.stop();}},_callee);})),[]);useEffect(function(){getLaunches();},[getLaunches]);var submitLaunch=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var data,launchDate,mission,rocket,target,response,success;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();setPendingLaunch(true);data=new FormData(e.target);launchDate=new Date(data.get(\"launch-day\"));mission=data.get(\"mission-name\");rocket=data.get(\"rocket-name\");target=data.get(\"planets-selector\");_context2.next=9;return httpSubmitLaunch({launchDate:launchDate,mission:mission,rocket:rocket,target:target});case 9:response=_context2.sent;// TODO: Set success based on response.\nsuccess=response.ok;if(success){getLaunches();setTimeout(function(){setPendingLaunch(false);onSuccessSound();},800);}else{onFailureSound();}case 12:case\"end\":return _context2.stop();}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),[getLaunches,onSuccessSound,onFailureSound]);var abortLaunch=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var response,success;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return httpAbortLaunch(id);case 2:response=_context3.sent;// TODO: Set success based on response.\nsuccess=false;if(success){getLaunches();onAbortSound();}else{onFailureSound();}case 5:case\"end\":return _context3.stop();}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}(),[getLaunches,onAbortSound,onFailureSound]);return{launches:launches,isPendingLaunch:isPendingLaunch,submitLaunch:submitLaunch,abortLaunch:abortLaunch};}export default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","_useState","_useState2","_slicedToArray","launches","saveLaunches","_useState3","_useState4","isPendingLaunch","setPendingLaunch","getLaunches","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchedLaunches","wrap","_callee$","_context","prev","next","sent","stop","submitLaunch","_ref2","_callee2","e","data","launchDate","mission","rocket","target","response","success","_callee2$","_context2","preventDefault","FormData","Date","get","ok","setTimeout","_x","apply","arguments","abortLaunch","_ref3","_callee3","id","_callee3$","_context3","_x2"],"sources":["/Users/ivanmironuk/WebstormProjects/nasa-app/client/src/hooks/useLaunches.js"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\n\nimport {\n    httpGetLaunches, httpSubmitLaunch, httpAbortLaunch,\n} from './requests';\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n    const [launches, saveLaunches] = useState([]);\n    const [isPendingLaunch, setPendingLaunch] = useState(false);\n\n    const getLaunches = useCallback(async () => {\n        const fetchedLaunches = await httpGetLaunches();\n        saveLaunches(fetchedLaunches);\n    }, []);\n\n    useEffect(() => {\n        getLaunches();\n    }, [getLaunches]);\n\n    const submitLaunch = useCallback(async (e) => {\n        e.preventDefault();\n        setPendingLaunch(true);\n        const data = new FormData(e.target);\n        const launchDate = new Date(data.get(\"launch-day\"));\n        const mission = data.get(\"mission-name\");\n        const rocket = data.get(\"rocket-name\");\n        const target = data.get(\"planets-selector\");\n        const response = await httpSubmitLaunch({\n            launchDate, mission, rocket, target,\n        });\n\n        // TODO: Set success based on response.\n        const success = response.ok;\n        if (success) {\n            getLaunches();\n            setTimeout(() => {\n                setPendingLaunch(false);\n                onSuccessSound();\n            }, 800);\n        } else {\n            onFailureSound();\n        }\n    }, [getLaunches, onSuccessSound, onFailureSound]);\n\n    const abortLaunch = useCallback(async (id) => {\n        const response = await httpAbortLaunch(id);\n\n        // TODO: Set success based on response.\n        const success = false;\n        if (success) {\n            getLaunches();\n            onAbortSound();\n        } else {\n            onFailureSound();\n        }\n    }, [getLaunches, onAbortSound, onFailureSound]);\n\n    return {\n        launches, isPendingLaunch, submitLaunch, abortLaunch,\n    };\n}\n\nexport default useLaunches;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}